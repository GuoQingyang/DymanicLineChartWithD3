<!DOCTYPE html>
<html>
<meta charset="utf-8">
<script src="js/d3.min.js"></script>

<script src="js/lineChartTranslation2.js"></script>

<link href="css/tipsy.css" rel="stylesheet" type="text/css" />
<body>
<svg contentScriptType="text/ecmascript" width="2000" xmlns:xlink="http://www.w3.org/1999/xlink" zoomAndPan="magnify" style="background-color:#ffffff;" contentStyleType="text/css" height="2000" viewBox="0 0 2000.0 2000.0" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" version="1.0">
<defs>
<symbol typename="null" statusvalue="0" statusname="非活动状态" categoryname="chart" groupname="extobj" viewBox="0 0 529 321" id="实时曲线_2" preserveAspectRatio="none meet" alisaname="实时曲线">
<g transform="translate(30,10)">
<g class="x axis" shape-rendering="crispEdges" transform="translate(30,271.0)">
<g style="opacity:1;" class="tick" transform="translate(5.3169,0)">
<line y2="6" stroke="#000000" x2="0"/>
<text fill="#000000" x="0" dy=".71em" y="9" style="text-anchor:middle;">
10:40:36</text>
</g>
<g style="opacity:1;" class="tick" transform="translate(125.0669,0)">
<line y2="6" stroke="#000000" x2="0"/>
<text fill="#000000" x="0" dy=".71em" y="9" style="text-anchor:middle;">
10:40:41</text>
</g>
<g style="opacity:1;" class="tick" transform="translate(244.8169,0)">
<line y2="6" stroke="#000000" x2="0"/>
<text fill="#000000" x="0" dy=".71em" y="9" style="text-anchor:middle;">
10:40:46</text>
</g>
<g style="opacity:1;" class="tick" transform="translate(364.5669,0)">
<line y2="6" stroke="#000000" x2="0"/>
<text fill="#000000" x="0" dy=".71em" y="9" style="text-anchor:middle;">
10:40:51</text>
</g>
<path fill="none" d="M0,6V0H479V6" class="domain" stroke="#000000"/>
</g>
<g class="y axis" shape-rendering="crispEdges" transform="translate(30,10)">
<g style="opacity:1;" class="tick" transform="translate(0,261.0)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
0</text>
</g>
<g style="opacity:1;" class="tick" transform="translate(0,226.2)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
20</text>
<line y2="0" stroke="#cccccc" x2="479"/>
</g>
<g style="opacity:1;" class="tick" transform="translate(0,191.4)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
40</text>
<line y2="0" stroke="#cccccc" x2="479"/>
</g>
<g style="opacity:1;" class="tick" transform="translate(0,156.6)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
60</text>
<line y2="0" stroke="#cccccc" x2="479"/>
</g>
<g style="opacity:1;" class="tick" transform="translate(0,121.80000000000001)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
80</text>
<line y2="0" stroke="#cccccc" x2="479"/>
</g>
<g style="opacity:1;" class="tick" transform="translate(0,87.0)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
100</text>
<line y2="0" stroke="#cccccc" x2="479"/>
</g>
<g style="opacity:1;" class="tick" transform="translate(0,52.19999999999999)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
120</text>
<line y2="0" stroke="#cccccc" x2="479"/>
</g>
<g style="opacity:1;" class="tick" transform="translate(0,17.400000000000006)">
<line y2="0" class="tickline" x2="-6" stroke="#000000"/>
<text fill="#000000" x="-9" dy=".32em" y="0" style="text-anchor:end;">
140</text>
<line y2="0" stroke="#cccccc" x2="479"/>
</g>
<path fill="none" d="M-6,0H0V261H-6" class="domain" stroke="#000000"/>
</g>
<defs>
<clipPath id="clipPath实时曲线_2">
<rect x="30" width="479" height="261" y="10"/>
</clipPath>
</defs>
<g clip-path="url(#clipPath实时曲线_2)">
<path fill="none" stroke-width="3" d="M0 243.60000610351562L23.950000762939453 52.20000076293945L47.900001525878906 227.94000244140625L71.8499984741211 133.97999572753906L95.80000305175781 97.44000244140625L119.75 174L143.6999969482422 113.0999984741211L167.64999389648438 257.5199890136719L191.60000610351562 210.5399932861328L215.5500030517578 90.4800033569336L239.5 142.67999267578125L263.45001220703125 234.89999389648438L287.3999938964844 114.83999633789062L311.3500061035156 52.20000076293945L335.29998779296875 34.79999923706055L359.25 227.94000244140625L383.20001220703125 123.54000091552734L407.1499938964844 29.579999923706055L431.1000061035156 125.27999877929688L455.04998779296875 93.95999908447266" class="path" transform="translate(30,10)" stroke="#1f77b4"/>
<g class="datagroups" transform="translate(30,10)">
<circle fill="#ffffff" r="4" class="data-point" cx="0.0" cy="243.6" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="23.950000000000003" cy="52.19999999999999" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="47.900000000000006" cy="227.94" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="71.85" cy="133.98" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="95.80000000000001" cy="97.44" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="119.75" cy="174.0" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="143.7" cy="113.1" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="167.64999999999998" cy="257.52" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="191.60000000000002" cy="210.54" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="215.55" cy="90.47999999999999" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="239.5" cy="142.68" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="263.45000000000005" cy="234.9" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="287.4" cy="114.83999999999997" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="311.35" cy="52.19999999999999" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="335.29999999999995" cy="34.79999999999998" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="359.25" cy="227.94" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="383.20000000000005" cy="123.54000000000002" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="407.15" cy="29.579999999999984" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="431.1" cy="125.28" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="455.04999999999995" cy="93.96000000000001" stroke="#1f77b4"/>
<circle fill="#ffffff" r="4" class="data-point" cx="-1000" cy="-1000" stroke="#1f77b4"/>

</g>
</g>
<g transform="translate(30,296)">
<rect fill="#1f77b4" x="0" width="10" height="10" y="0"/>
<text dx="15" fill="#000000" dy=".8em" class="markertext">
1</text>
</g>
</g>
<text fill="#000000" x="40" font-size="12px" y="12" style="text-anchor:middle;" class="unittextvalue">
</text>
</symbol>
</defs>

<rect x="0" width="545" y="0" height="334" style="stroke-width:1.0;fill:#f3f3f3;stroke:none;" transform=""/>
<use id="use1" typename="null" datacounts="20" diagram-rtdbids="1" xmlns:xlink="http://www.w3.org/1999/xlink" style="shape-rendering:auto;" minvalue="0" transform="" width="529.970947265625" xlink:show="embed" xlink:type="simple" maxvalue="150" samprate="1" symbolname="实时曲线" height="321.0000305175781" diagram-xnames="1" groupname="extobj" categoryname="chart" x="-0.9999848008155823" y="4" xlink:href="#实时曲线_2" xlink:actuate="onLoad"/>


</svg>


<script>
 
 var testValueCount=0;
  function NewValue(){
       testValueCount++;
 // console.log(testValueCount);
        if(testValueCount==25 || testValueCount==28){
		    return 1000;
		}
		
		if(testValueCount==100){
		  return -500;
		}
        if(Math.random() > .5){
            return Math.round(Math.random()*150);
        } else {
            return (Math.random()*150).toFixed(1);
        }
		
		
	  
    }
	 
	
	var el=d3.select("#use1");
	var min=el.attr("minvalue");
	var max=el.attr("maxvalue");
	var samprate=el.attr("samprate");
	var dataCount=el.attr("datacounts");
	
	
	
    var uadatas=[];
	var ubdatas=[];
	var uadatas2=[];
	var ubdatas2=[];
	
	var uadatas3=[];
	var ubdatas3=[];
	
	 var t=new Date();
    var timenow=t.getTime(); 
	
	var timeStart=timenow;
	
    uadatas.push([timeStart,120]);
    ubdatas.push([timeStart,80]);
	uadatas2.push([timeStart,160]);
    ubdatas2.push([timeStart,300]);
	uadatas3.push([timeStart,20]);
    ubdatas3.push([timeStart,80]);
	

	var lineInitdataset = [
	 
	  {name:"UA",
	  alldatas:uadatas
	 }
    ];
	

	
	function addData(timeminInLine,dataCountInLine,timeStepInLine,updateData,useId){
	      var t = new Date();
		  
		  var timenowToAdd = timeminInLine+dataCountInLine*timeStepInLine;
		 
		 if(useId=="use1"){
		      for (var i = 0; i < updateData.length; i++) {
			  updateData[i].alldatas.push([timenowToAdd, NewValue()]);
		   }
		 }
		 
		 if(useId=="use2"){
		   for (var i = 0; i < updateData.length; i++) {
			  updateData[i].alldatas.push([timenowToAdd, NewValue1()]);
		   }
		 }
		 
		  if(useId=="use3"){
		   for (var i = 0; i < updateData.length; i++) {
			  updateData[i].alldatas.push([timenowToAdd, NewValue2()]);
		   }
		 }
		 
		
		   return updateData;
	}
	
	function deleteData(updateData,useId){
	      for (var i = 0; i < updateData.length; i++) {
			       updateData[i].alldatas.shift();

	       }
		  return updateData;
	}
	
	
    //渲染曲线图
	var objLine=new LoadLineChart("实时曲线_2",lineInitdataset,min,max,samprate,dataCount,"use1");
	objLine.updateLineChart();
	
	//var objLine2=new LoadLineChart("实时曲线_3",lineInitdataset2,min2,max2,samprate2,dataCount2,"use2");
	//objLine2.updateLineChart();
	
	//var objLine3=new LoadLineChart("实时曲线_4",lineInitdataset3,min3,max3,samprate3,dataCount3,"use3");
	//objLine3.updateLineChart();
	
	
	
</script>
</body>
</html>
